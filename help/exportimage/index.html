<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="google-site-verification" content="fYVpSfxWCs2yqh6HrmIurwg_hof_7vkfSq2kB6yqVGQ"><meta name="description" content="Blazor Canvas Drawing Component"><meta name="keywords" content="blazor, blazor drawing, canvas, ui, doodle, stdoodle, .net 5, trevor marÃ©, stdoodle.doodle, draw, pen"><title>STDoodle Doodle</title><base href="/STDoodle/"><link href="css/bootstrap/bootstrap.min.css" rel="stylesheet"><link href="css/app.css" rel="stylesheet"><link href="STDoodle.DemoWASM.styles.css" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/styles/github-dark.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"><style>.font-style-italic{font-style:italic}.gtour-overlay{z-index:10001!important}.gtour-wrapper{z-index:10002!important}.tour-step-content{max-width:25vw;min-width:200px}.guided-tour-wrapper[data-popper-placement^=top]>.my-arrow{bottom:-16px;transform:rotate(180deg)!important}.guided-tour-wrapper[data-popper-placement^=bottom]>.my-arrow{top:-12px}.guided-tour-wrapper[data-popper-placement^=left]>.my-arrow{right:-12px;transform:rotate(90deg)!important}.guided-tour-wrapper[data-popper-placement^=right]>.my-arrow{left:-12px;transform:rotate(-90deg)!important}.element-highlight{border:solid 2px #008aff;z-index:9;position:relative;background-color:#fff}</style><link rel="preconnect" href="https://cdnjs.cloudflare.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"></head><body><div id="app"><!--!--><!--!--><!--!--><!--!--><div class="page" b-a02fw36nuz=""><div class="sidebar" b-a02fw36nuz=""><!--!--><div class="top-row pl-4 navbar navbar-dark" b-t71mygaqfq=""><!--!--><a class="navbar-brand" href="" b-t71mygaqfq="">STDoodle.DemoWASM</a> <button class="navbar-toggler" b-t71mygaqfq=""><!--!--><span class="navbar-toggler-icon" b-t71mygaqfq=""></span></button></div><!--!--><div class="collapse" b-t71mygaqfq=""><ul class="nav flex-column" b-t71mygaqfq=""><li class="nav-item px-3" b-t71mygaqfq=""><!--!--><a href="" class="nav-link active"><!--!--><span class="oi oi-plus" aria-hidden="true" b-t71mygaqfq=""></span> Overview</a></li><!--!--><li class="nav-item px-3" b-t71mygaqfq=""><!--!--><a href="help/doodledraw" class="nav-link"><!--!--><span class="oi oi-home" aria-hidden="true" b-t71mygaqfq=""></span> Demo</a></li><!--!--><li class="nav-item px-3" b-t71mygaqfq=""><!--!--><a href="help/configuration" class="nav-link"><!--!--><span class="oi oi-home" aria-hidden="true" b-t71mygaqfq=""></span> Configuration</a></li><!--!--><li class="nav-item px-3" b-t71mygaqfq=""><!--!--><a href="help/exportimage" class="nav-link active"><!--!--><span class="oi oi-home" aria-hidden="true" b-t71mygaqfq=""></span> Export Image</a></li><!--!--><li class="nav-item px-3" b-t71mygaqfq=""><!--!--><a href="help/servicestartup" class="nav-link"><!--!--><span class="oi oi-home" aria-hidden="true" b-t71mygaqfq=""></span> Register Services</a></li><!--!--><li class="nav-item px-3" b-t71mygaqfq=""><!--!--><a href="help/savedoodle" class="nav-link"><!--!--><span class="oi oi-home" aria-hidden="true" b-t71mygaqfq=""></span> Save/Restore Doodle</a></li><!--!--><li class="nav-item px-3" b-t71mygaqfq=""><!--!--><a href="help/theme" class="nav-link"><!--!--><span class="oi oi-home" aria-hidden="true" b-t71mygaqfq=""></span> Theme</a></li></ul></div></div><!--!--><div class="main" b-a02fw36nuz=""><!--!--><div class="top-row px-4" b-a02fw36nuz=""><a class="btn btn-info" role="button" href="https://github.com/TrevorMare/STDoodle" target="_blank" b-a02fw36nuz="">Open Github Project</a> <a href="http://blazor.net" target="_blank" class="ml-md-auto" b-a02fw36nuz="">About</a></div><div class="content px-4" b-a02fw36nuz=""><!--!--><!--!--><!--!--><h2>Exporting an image</h2><!--!--><p>There are multiple ways of exporting a image to a Base64 string depending on your needs</p><!--!--><h3>Call Doodle Export</h3><!--!--><p>The first way of exporting an image would be to call the export functionality on the reference of the Doodle object.</p><pre><code class="language-html hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height: 50vh;"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">DoodleDraw</span> @<span class="hljs-attr">ref</span>=<span class="hljs-string">"_doodleDraw"</span>&gt;</span>
        
    <span class="hljs-tag">&lt;/<span class="hljs-name">DoodleDraw</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre><!--!--><pre><code class="language-cs hljs language-csharp">@code {
    <span class="hljs-keyword">private</span> DoodleDraw _doodleDraw;

    <span class="hljs-comment">// Called from a custom button click</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">OnExportButtonClick</span>(<span class="hljs-params"></span>)</span> 
    {
        ...
        <span class="hljs-built_in">string</span> base64Data = <span class="hljs-keyword">await</span> _doodleDraw.ExportDoodleToImage();
        ...                
    }
}
    </code></pre><!--!--><!--!--><h3>Doodle Export Event Callback</h3><!--!--><p>The second way of exporting an image would be to set the callback event property on the Doodle.</p><pre><code class="language-html hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height: 50vh;"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">DoodleDraw</span> @<span class="hljs-attr">ref</span>=<span class="hljs-string">"_doodleDraw"</span> <span class="hljs-attr">OnExportImage</span>=<span class="hljs-string">"RenderExportImage"</span>&gt;</span>
        
    <span class="hljs-tag">&lt;/<span class="hljs-name">DoodleDraw</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre><!--!--><pre><code class="language-cs hljs language-csharp">@code {
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">RenderExportImage</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> base64Image</span>)</span> 
    {
        ...
    }
}
    </code></pre><!--!--><!--!--><h3>Export Image Handler</h3><!--!--><p>The last way of exporting an image would be to create a custom export image handler. Below is an example of creating such a handler</p><!--!--><pre><code class="language-cs hljs language-csharp">
       
    <span class="hljs-keyword">namespace</span> <span class="hljs-title">YourNamespace</span>
    {
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnExportImageBase64Handler</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, <span class="hljs-built_in">string</span> base64Image</span>)</span>;

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyExportHandler</span> : <span class="hljs-title">Abstractions.Interfaces.IDoodleExportHandler</span>
        {

            <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> OnExportImageBase64Handler OnExportImageBase64;

            <span class="hljs-function"><span class="hljs-keyword">public</span> Task <span class="hljs-title">ExportImageBase64</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> base64ImageData</span>)</span>
            {
                OnExportImageBase64?.Invoke(<span class="hljs-keyword">this</span>, base64ImageData);
                <span class="hljs-keyword">return</span> Task.CompletedTask;
            }
        }

    }
       
    </code></pre><!--!--><p>Lastly, you need to register you export handler in the containers. This can be done when registering the Doodle Services</p><!--!--><pre><code class="language-cs hljs language-csharp">
      services.UseDoodle((config) =&gt; 
      {
          ...
      }, 
      exportHandler: () =&gt; <span class="hljs-keyword">new</span> MyExportHandler(),
      ...
    }
    </code></pre><!--!--><h3>Export Options</h3><!--!--><p>The Doodle component uses HTML2Canvas to render the canvas component to an Image and the export options used is defined in the startup configuration. When calling the <b>ExportDoodleToImage</b> on the component directly, it can also be passed to this method. The options correspond directly to the options on the HTML2Canvas Component and the help/documentation can be found there.</p><!--!--><pre><code class="language-cs hljs language-csharp">
      services.UseDoodle((config) =&gt; 
      {
        ...
        config.Html2CanvasConfig = <span class="hljs-keyword">new</span> Doodle.Abstractions.Config.Html2CanvasConfig()
        {
            ...
            UseCORS = <span class="hljs-literal">true</span>
            ...
        };
        ...
      }, 
      exportHandler: () =&gt; <span class="hljs-keyword">new</span> MyExportHandler(),
      ...
    }
    </code></pre><!--!--><p>This is the HTML2Canvas Configuration structure with the defaults.</p><!--!--><pre><code class="language-cs hljs language-csharp">
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> AllowTaint { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-literal">true</span>;

        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> BackgroundColor { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-literal">null</span>;

        <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span>? ForeignObjectRendering { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span>? ImageTimeout { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

        <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span>? Logging { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Proxy { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-literal">null</span>;

        <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span>? RemoveContainer { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

        <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> UseCORS { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-literal">true</span>;

        <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span>? Scale { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

        <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span>? Width { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

        <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span>? Height { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

        <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span>? X { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

        <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span>? Y { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

        <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span>? ScrollX { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

        <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span>? ScrollY { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

        <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span>? WindowHeight { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

        <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span>? WindowWidth { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    </code></pre></div></div></div></div><div id="blazor-error-ui">An unhandled error has occurred. <a href="" class="reload">Reload</a> <a class="dismiss">ðŸ—™</a></div><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js"></script><script src="_framework/blazor.webassembly.js"></script><script>window.exportImage = (imgData) => {
            window.open().document.write('<img src="' + imgData + '" />');
        }
        window.higlightCode = () => {
            hljs.highlightAll();
        };</script></body></html>